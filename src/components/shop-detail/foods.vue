<template>
  <div>
    <div class="svg">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
           style="position:absolute;width:0;height:0">
        <defs>
          <symbol viewBox="0 0 60 60" id="close.22a2874">
            <g fill="none" fill-rule="evenodd" opacity=".8" transform="translate(3 3)">
              <path fill="#FFF"
                    d="M27 25.384l9.697-9.698a1.143 1.143 0 1 1 1.617 1.617L28.616 27l9.698 9.697a1.143 1.143 0 1 1-1.617 1.617L27 28.616l-9.697 9.698a1.143 1.143 0 1 1-1.617-1.617L25.384 27l-9.698-9.697a1.143 1.143 0 1 1 1.617-1.617L27 25.384z"></path>
              <circle cx="27" cy="27" r="26.5" stroke="#FFF"></circle>
            </g>
          </symbol>
        </defs>
      </svg>
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
           style="position:absolute;width:0;height:0">
        <defs>
          <symbol viewBox="0 0 60 10" id="star-actived.d4c54d1">
            <defs>
              <linearGradient id="star-actived.d4c54d1_a" x1="0%" y1="50%" y2="50%">
                <stop offset="0%" stop-color="#FFDE00"></stop>
                <stop offset="100%" stop-color="#FFB000"></stop>
              </linearGradient>
            </defs>
            <path fill="url(#star-actived.d4c54d1_a)" fill-rule="evenodd"
                  d="M54.017 8.072l-2.552 1.561c-.476.291-.758.096-.626-.455l.696-2.909-2.273-1.944c-.424-.362-.325-.691.239-.736l2.982-.237L53.63.589c.213-.515.557-.523.774 0l1.146 2.763 2.982.237c.556.044.67.368.24.736l-2.274 1.944.696 2.91c.13.542-.143.75-.626.454l-2.551-1.56zm-48 0L3.465 9.633c-.476.291-.758.096-.626-.455l.696-2.909-2.273-1.944c-.424-.362-.325-.691.239-.736l2.982-.237L5.63.589c.213-.515.557-.523.774 0L7.55 3.352l2.982.237c.556.044.67.368.24.736L8.497 6.269l.696 2.91c.13.542-.143.75-.626.454l-2.551-1.56zm12 0l-2.552 1.561c-.476.291-.758.096-.626-.455l.696-2.909-2.273-1.944c-.424-.362-.325-.691.239-.736l2.982-.237L17.63.589c.213-.515.557-.523.774 0l1.146 2.763 2.982.237c.556.044.67.368.24.736l-2.274 1.944.696 2.91c.13.542-.143.75-.626.454l-2.551-1.56zm12 0l-2.552 1.561c-.476.291-.758.096-.626-.455l.696-2.909-2.273-1.944c-.424-.362-.325-.691.239-.736l2.982-.237L29.63.589c.213-.515.557-.523.774 0l1.146 2.763 2.982.237c.556.044.67.368.24.736l-2.274 1.944.696 2.91c.13.542-.143.75-.626.454l-2.551-1.56zm12 0l-2.552 1.561c-.476.291-.758.096-.626-.455l.696-2.909-2.273-1.944c-.424-.362-.325-.691.239-.736l2.982-.237L41.63.589c.213-.515.557-.523.774 0l1.146 2.763 2.982.237c.556.044.67.368.24.736l-2.274 1.944.696 2.91c.13.542-.143.75-.626.454l-2.551-1.56z"></path>
          </symbol>
          <symbol viewBox="0 0 60 10" id="star-gray.cc081b9">
            <path fill="#EEE" fill-rule="evenodd"
                  d="M54.017 8.072l-2.552 1.561c-.476.291-.758.096-.626-.455l.696-2.909-2.273-1.944c-.424-.362-.325-.691.239-.736l2.982-.237L53.63.589c.213-.515.557-.523.774 0l1.146 2.763 2.982.237c.556.044.67.368.24.736l-2.274 1.944.696 2.91c.13.542-.143.75-.626.454l-2.551-1.56zm-48 0L3.465 9.633c-.476.291-.758.096-.626-.455l.696-2.909-2.273-1.944c-.424-.362-.325-.691.239-.736l2.982-.237L5.63.589c.213-.515.557-.523.774 0L7.55 3.352l2.982.237c.556.044.67.368.24.736L8.497 6.269l.696 2.91c.13.542-.143.75-.626.454l-2.551-1.56zm12 0l-2.552 1.561c-.476.291-.758.096-.626-.455l.696-2.909-2.273-1.944c-.424-.362-.325-.691.239-.736l2.982-.237L17.63.589c.213-.515.557-.523.774 0l1.146 2.763 2.982.237c.556.044.67.368.24.736l-2.274 1.944.696 2.91c.13.542-.143.75-.626.454l-2.551-1.56zm12 0l-2.552 1.561c-.476.291-.758.096-.626-.455l.696-2.909-2.273-1.944c-.424-.362-.325-.691.239-.736l2.982-.237L29.63.589c.213-.515.557-.523.774 0l1.146 2.763 2.982.237c.556.044.67.368.24.736l-2.274 1.944.696 2.91c.13.542-.143.75-.626.454l-2.551-1.56zm12 0l-2.552 1.561c-.476.291-.758.096-.626-.455l.696-2.909-2.273-1.944c-.424-.362-.325-.691.239-.736l2.982-.237L41.63.589c.213-.515.557-.523.774 0l1.146 2.763 2.982.237c.556.044.67.368.24.736l-2.274 1.944.696 2.91c.13.542-.143.75-.626.454l-2.551-1.56z"></path>
          </symbol>
        </defs>
      </svg>
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
           style="position:absolute;width:0;height:0">
        <defs>
          <symbol viewBox="0 0 60 60" id="close.22a2874">
            <g fill="none" fill-rule="evenodd" opacity=".8" transform="translate(3 3)">
              <path fill="#FFF"
                    d="M27 25.384l9.697-9.698a1.143 1.143 0 1 1 1.617 1.617L28.616 27l9.698 9.697a1.143 1.143 0 1 1-1.617 1.617L27 28.616l-9.697 9.698a1.143 1.143 0 1 1-1.617-1.617L25.384 27l-9.698-9.697a1.143 1.143 0 1 1 1.617-1.617L27 25.384z"></path>
              <circle cx="27" cy="27" r="26.5" stroke="#FFF"></circle>
            </g>
          </symbol>
        </defs>
      </svg>
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
           style="position:absolute;width:0;height:0">
        <defs>
          <symbol viewBox="0 0 32 32" id="success">
            <path fill="#FEF0CA" fill-rule="nonzero"
                  d="M16 32C7.17 32 0 24.83 0 16S7.17 0 16 0s16 7.17 16 16-7.17 16-16 16zm-2.074-9.719c.533 0 1.067-.177 1.481-.592l7.941-7.94c.83-.83.83-2.134 0-2.964a2.075 2.075 0 0 0-2.963 0l-6.518 6.519-2.311-2.311c-.83-.83-2.134-.83-2.904 0-.83.83-.83 2.133 0 2.903l3.792 3.793c.415.415.949.592 1.482.592z"></path>
          </symbol>
          <symbol xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 640 64" id="arc-cover">
            <defs>
              <linearGradient id="arc-cover_a" x1="100%" x2="0%" y1="50%" y2="50%">
                <stop offset="0%" stop-opacity=".05"></stop>
                <stop offset="49.809%" stop-opacity=".1"></stop>
                <stop offset="100%" stop-opacity=".05"></stop>
              </linearGradient>
              <linearGradient id="arc-cover_d" x1="100%" x2="1.25%" y1="50%" y2="50%">
                <stop offset="0%" stop-color="#DC1E36"></stop>
                <stop offset="100%" stop-color="#FD4E4C"></stop>
              </linearGradient>
              <path id="arc-cover_c"
                    d="M0 13c86.885 32.667 193.219 49 319 49s232.781-16.333 321-49v360c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V13z"></path>
              <filter id="arc-cover_b" width="107.3%" height="112.2%" x="-3.7%" y="-6.6%"
                      filterUnits="objectBoundingBox">
                <feOffset dy="-2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
                <feGaussianBlur in="shadowOffsetOuter1" result="shadowBlurOuter1" stdDeviation="7.5"></feGaussianBlur>
                <feColorMatrix in="shadowBlurOuter1" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"></feColorMatrix>
              </filter>
            </defs>
            <g fill="none" fill-rule="evenodd">
              <path fill="url(#arc-cover_a)"
                    d="M0 10c86.885 30.667 193.219 46 319 46s232.781-15.333 321-46v313c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V10z"></path>
              <use fill="#000" filter="url(#arc-cover_b)" xlink:href="#arc-cover_c"></use>
              <use fill="url(#arc-cover_d)" xlink:href="#arc-cover_c"></use>
            </g>
          </symbol>
          <symbol viewBox="0 0 547 987" id="arrow-right">
            <path d="M0 931.973l51.2 54.613 494.933-494.933L51.2.133 0 51.333l440.32 440.32L0 931.973z"></path>
          </symbol>
          <symbol viewBox="0 0 20 32" id="arrow-left">
            <path fill="#fff"
                  d="M16.552 5.633l-2.044-2.044L2.243 15.854l12.265 12.557 2.044-2.044L6.331 15.854z"></path>
          </symbol>
          <symbol viewBox="0 0 1024 1024" id="res-x">
            <path fill-rule="evenodd"
                  d="M480.518 512L8.377 984.141c-8.853 8.853-8.777 22.871-.083 31.565 8.754 8.754 22.825 8.656 31.565-.083L512 543.482l472.141 472.141c8.853 8.853 22.871 8.777 31.565.083 8.754-8.754 8.656-22.825-.083-31.565L543.482 512l472.141-472.141c8.853-8.853 8.777-22.871.083-31.565-8.754-8.754-22.825-8.656-31.565.083L512 480.518 39.859 8.377C31.006-.476 16.988-.4 8.294 8.294c-8.754 8.754-8.656 22.825.083 31.565L480.518 512z"
                  class="path1 fill-color3"></path>
          </symbol>
          <symbol viewBox="0 0 8 12" id="svip-down">
            <path fill="#F2DD7D" fill-rule="nonzero" d="M2.07 0v6.018H0l4 5.459 4-5.459H5.93V0H2.07z"></path>
          </symbol>
          <symbol viewBox="0 0 10 8" id="svip-crown">
            <path fill="#F2DD7D" fill-rule="evenodd"
                  d="M7.11 2.688L5.143.072a.177.177 0 0 0-.286 0L2.89 2.69a.709.709 0 0 1-.991.152L.286 1.662a.177.177 0 0 0-.253.044.193.193 0 0 0-.03.14L.97 7.505a.37.37 0 0 0 .287.302c1.261.259 6.238.259 7.48 0a.37.37 0 0 0 .285-.301l.975-5.67a.187.187 0 0 0-.147-.218.177.177 0 0 0-.137.032L8.104 2.838a.709.709 0 0 1-.994-.15z"></path>
          </symbol>
          <symbol viewBox="0 0 13 10" id="svip-icon">
            <defs>
              <linearGradient id="svip-icon_a" x1="100%" x2="0%" y1="50%" y2="50%">
                <stop offset="0%" stop-color="#FDBD05"></stop>
                <stop offset="100%" stop-color="#FFDB72"></stop>
              </linearGradient>
            </defs>
            <path fill="url(#svip-icon_a)" fill-rule="evenodd"
                  d="M9.354 3.36L6.894.09a.222.222 0 0 0-.357 0l-2.46 3.273a.886.886 0 0 1-1.24.19L.823 2.076a.222.222 0 0 0-.316.055.24.24 0 0 0-.038.177l1.21 7.07c.032.19.174.34.358.378 1.576.324 7.797.324 9.35.001a.462.462 0 0 0 .356-.377l1.219-7.088a.234.234 0 0 0-.183-.272.22.22 0 0 0-.172.04l-2.012 1.486a.886.886 0 0 1-1.241-.187z"></path>
          </symbol>
          <symbol xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" id="gray-close">
            <defs>
              <path id="gray-close_a"
                    d="M13.132 12l6.47-6.47a.75.75 0 0 0-1.061-1.06l-6.47 6.47-6.47-6.47a.75.75 0 0 0-1.06 1.06L11.01 12l-.072.071.071.071-6.47 6.47a.75.75 0 0 0 1.061 1.06l6.47-6.47 6.47 6.47a.75.75 0 0 0 1.06-1.06l-6.47-6.47.072-.07-.071-.072z"></path>
            </defs>
            <g fill="none" fill-rule="evenodd">
              <use fill="#000" fill-opacity=".54" fill-rule="nonzero" xlink:href="#gray-close_a"></use>
              <path d="M0 0h24v24H0z"></path>
            </g>
          </symbol>
          <symbol viewBox="0 0 32 32" id="success">
            <path fill="#FEF0CA" fill-rule="nonzero"
                  d="M16 32C7.17 32 0 24.83 0 16S7.17 0 16 0s16 7.17 16 16-7.17 16-16 16zm-2.074-9.719c.533 0 1.067-.177 1.481-.592l7.941-7.94c.83-.83.83-2.134 0-2.964a2.075 2.075 0 0 0-2.963 0l-6.518 6.519-2.311-2.311c-.83-.83-2.134-.83-2.904 0-.83.83-.83 2.133 0 2.903l3.792 3.793c.415.415.949.592 1.482.592z"></path>
          </symbol>
        </defs>
      </svg>
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
           style="position:absolute;width:0;height:0;visibility:hidden">
        <defs>
          <symbol viewBox="0 0 44 44" id="cart-add">
            <path fill-rule="evenodd"
                  d="M22 0C9.8 0 0 9.8 0 22s9.8 22 22 22 22-9.8 22-22S34.2 0 22 0zm0 42C11 42 2 33 2 22S11 2 22 2s20 9 20 20-9 20-20 20z"
                  clip-rule="evenodd"></path>
            <path fill-rule="evenodd" d="M32 20c1.1 0 2 .9 2 2s-.9 2-2 2H12c-1.1 0-2-.9-2-2s.9-2 2-2h20z"
                  clip-rule="evenodd"></path>
          </symbol>
          <symbol viewBox="0 0 44 44" id="cart-minus">
            <path fill="none" d="M0 0h44v44H0z"></path>
            <path fill-rule="evenodd"
                  d="M22 0C9.8 0 0 9.8 0 22s9.8 22 22 22 22-9.8 22-22S34.2 0 22 0zm10 24h-8v8c0 1.1-.9 2-2 2s-2-.9-2-2v-8h-8c-1.1 0-2-.9-2-2s.9-2 2-2h8v-8c0-1.1.9-2 2-2s2 .9 2 2v8h8c1.1 0 2 .9 2 2s-.9 2-2 2z"
                  clip-rule="evenodd"></path>
          </symbol>
          <symbol xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 15 15" id="cart-remove">
            <defs>
              <path id="cart-remove_a" d="M0 15h13V0H0z"></path>
            </defs>
            <g fill="none" fill-rule="evenodd" transform="translate(1)">
              <path fill="#979797"
                    d="M7.05 15h-5.5c-.303 0-.55-.26-.55-.583V5.091c0-.322.246-.583.55-.583.304 0 .55.26.55.583v8.743h4.95c1.032 0 2-.426 2.728-1.2A4.18 4.18 0 0 0 10.9 9.735l-.03-7.15c0-.323.245-.585.548-.586h.003c.302 0 .548.26.55.58L12 9.732a5.374 5.374 0 0 1-1.442 3.724C9.622 14.451 8.376 15 7.05 15z"></path>
              <path fill="#979797"
                    d="M12.458 3H.542C.242 3 0 2.776 0 2.5S.243 2 .542 2h11.916c.3 0 .542.224.542.5s-.243.5-.542.5"></path>
              <mask id="cart-remove_b" fill="#fff">
                <use xlink:href="#cart-remove_a"></use>
              </mask>
              <path fill="#979797"
                    d="M5 2h3V1H5v1zm3.464 1H4.536C4.24 3 4 2.776 4 2.5v-2c0-.276.24-.5.536-.5h3.928C8.76 0 9 .224 9 .5v2c0 .276-.24.5-.536.5z"
                    mask="url(#cart-remove_b)"></path>
            </g>
          </symbol>
          <symbol viewBox="0 0 14 16" id="cart">
            <path fill="#FFF" fill-rule="evenodd"
                  d="M12.364 2.998H2.088L1.816.687a.455.455 0 0 0-.478-.431L.431.303A.454.454 0 0 0 0 .78l1.256 10.893c.006.293.011 1.325.933 1.325h9.546a.455.455 0 0 0 .455-.454v-.881a.454.454 0 0 0-.455-.455H3.05l-.11-.937h8.606c.998 0 1.889-.724 1.989-1.616l.455-4.04c.1-.893-.628-1.617-1.626-1.617zm-.45 4.245c-.075.669-.317 1.212-1.066 1.212H2.727L2.3 4.812h8.821c.749 0 1.065.543.99 1.212l-.197 1.219zM2.416 15.79a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm9.092 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path>
          </symbol>
          <symbol viewBox="0 0 7 5" id="vip-icon">
            <defs>
              <linearGradient id="vip-icon_a" x1="50%" x2="50%" y1="100%" y2="-8.227%">
                <stop offset="0%" stop-color="#FFE571"></stop>
                <stop offset="100%" stop-color="#FFFAE4"></stop>
              </linearGradient>
            </defs>
            <path fill="url(#vip-icon_a)" fill-rule="evenodd"
                  d="M6.262 3.002L4.5 1 2.737 3.002 1.154 2.1a.1.1 0 0 0-.148.101l.544 3.714a.1.1 0 0 0 .1.086h5.7a.1.1 0 0 0 .099-.085L7.994 2.2a.1.1 0 0 0-.148-.101l-1.584.903z"
                  transform="translate(-1 -1)"></path>
          </symbol>
          <symbol viewBox="0 0 13 13" id="icon-warn">
            <g fill="none" fill-rule="evenodd">
              <circle cx="6.5" cy="6.5" r="6.5" fill="#FF5339"></circle>
              <path fill="#FFF" d="M6 3h1v5H6zM6 9h1v1H6z"></path>
            </g>
          </symbol>
        </defs>
      </svg>
    </div>
    <div class="menuview-menuview_2hUkG" style="height: 1252px;">
      <div class="menuview-menuviewNodata_2iJo3" style="display: none;"><img
        src="//github.elemecdn.com/eleme/fe-static/1cb05f59/media/empty/no-food.png">
        <p>没有商品</p>
        <p>该商家还未上传商品</p>
      </div>
      <div class="menuview-menuviewMain_17K3g">
        <main class="menuview-main_i6fQ3">
          <ul class="menucategory-category_29kyE menuview-menuNav_2_lFf">
            <li @click="toggleMenu(menuKey)" :class="{'menucategory-active_JnDmc': menuKey === currMenu}" :key="menuKey"
                v-for="(item, menuKey) in menus" role="button" :aria-label="item.name"
                class="menucategory-hasicon_2MBNs menucategory-categoryItem_3e27M">
              <span v-if="item.count > 0" class="menucategory-categoryQuantity_28BIn">{{item.count}}</span>
              <img v-if="item.icon_url" class="menucategory-categoryIcon_375ij"
                   src="https://fuss10.elemecdn.com/0/6a/05b267f338acfeb8bd682d16e836dpng.png?imageMogr/format/webp/thumbnail/26x/">
              <span class="menucategory-categoryName_qwsbd">{{item.name}}</span>
            </li>
          </ul>
          <section data-v-f433384a="" class="container menuview-menuList_JqDMu">
            <div @scroll="rightPanelScroll" data-v-f433384a="" class="scroller" ref="rightPanel">
              <!---->
              <dl :key="menuKey" v-for="(item, menuKey) in menus" data-v-f433384a="" role="menu">
                <dt data-v-f433384a="" role="heading" :aria-label="item.description">
                <div data-v-f433384a="" class="category-title">
                  <strong data-v-f433384a="" class="category-name">{{item.name}}</strong>
                  <span data-v-f433384a="" class="category-desc">{{item.description}}</span>
                </div>
                <!---->
                </dt>
                <dd :key="foodKey" v-for="(food, foodKey) in item.foods" data-v-f433384a=""
                    aria-label="food.description" role="menuitem" class="">
                  <div data-v-f433384a="" class="fooddetails-root_2HoY2">
                    <span class="fooddetails-logo_2Q0S7">
                      <!-- <span class="attrTag-attrTag_2f7Ms_0 mini-tag-tag_1I2lF_0 fooddetails-attrTag_2TNes">新品
                        <span class="attrTag-newGhost_3oqLj_0 mini-tag-ghost_2_w2f_0">新品</span>
                      </span>-->
                      <img alt="轰炸鱿鱼麻辣香锅" title="轰炸鱿鱼麻辣香锅"
                           :src="'https://fuss10.elemecdn.com/'+formatImgUrl(food.image_path)+'?imageMogr/format/webp/thumbnail/!140x140r/gravity/Center/crop/140x140/'"></span>
                    <section class="fooddetails-info_1fBtn">
                      <p class="fooddetails-name_P4hpW">
                        <!---->
                        {{food.name}}
                        <!---->
                      </p>
                      <p class="fooddetails-desc_3tvBJ">{{food.description}}</p>
                      <p class="fooddetails-sales_1ETVq">
                        <span>月售{{food.month_sales}}份</span>
                        <span>好评率{{Math.floor((food.rating / 5) * 100)}}%</span>
                      </p>
                      <!-- <div class="fooddetails-activityRow_1FKti">
                        <div class="vipActivity-root_f_hSQ_0">
                          <div class="vipActivity-left_12HO6_0">
                            <svg class="vipActivity-icon_1_u7D_0">
                              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#vip-icon"></use>
                            </svg>
                            <span class="mini-tag-tag_1I2lF_0">5折起
                              <span class="mini-tag-ghost_2_w2f_0" style="color: rgb(255, 247, 212);">5折起</span>
                            </span>
                          </div>
                          <span class="vipActivity-right_13c6L_0 mini-tag-tag_1I2lF_0">超级会员专享
                            <span class="vipActivity-rightGhost_3ZWjy_0 mini-tag-ghost_2_w2f_0">超级会员专享</span>
                          </span>
                        </div>
                      </div>-->
                      <strong class="salesInfo-price_3_oc1_0 fooddetails-salesInfo_MPG41">
                        <span>{{food.specfoods[0].price}}</span>
                        <span class="salesInfo-lowestPrice_3yG6H_0">起</span>
                        <!---->
                      </strong>

                      <div class="fooddetails-button_RwKqC">
                        <span>
                          <CartControl @foodAdd="foodAdd" @foodDel="foodDel" :food="food"/>
                        </span>
                      </div>
                    </section>
                  </div>
                </dd>
                <!---->
              </dl>
            </div>
            <div data-v-f433384a="" class="specpanel-container_28FLy">
              <div class="specpanel-specpanel_3CRhf" style="display: none;">
                <h1></h1>
                <div class="specpanel-candidators_IUXBF"></div>
                <div class="specpanel-selectedresult_3-qgQ">
                  <p class="specpanel-price_2fywH">
                    <small class="specpanel-yen_dt8UU">¥</small>
                    <span class="specpanel-now_PGE8E">0</span>
                    <small class="specpanel-extratext_GKpVd">起</small>
                  </p>
                  <div>
                    <!---->
                    <button type="button" class="specpanel-cartadd_3b5FJ specpanel-disabled_1T-EE">选好了</button>
                  </div>
                </div>
                <a href="javascript:" role="button" aria-label="关闭" class="specpanel-close_2TIOf"></a>
              </div>
              <div class="specpanel-layer_1vL1r" style="display: none;"></div>
            </div>
            <!---->
          </section>
        </main>
        <ShopCart ref="shopcart" :cart="cart" :piecewiseAgentFee="piecewiseAgentFee" @clearCart="clearCart"/>
      </div>
    </div>
  </div>
</template>
<script>
import { getImgUrl } from '../../common/utils';
import ShopCart from './shopcart';
import CartControl from './cart-control';
import { getMenu } from '../../api/shop-detail/shop-detail';
import { mapGetters } from 'vuex';

const SCROLL_INTERVAL = 10;// 把一次的滚动分成多少次

export default {
  data () {
    return {
      cart: [], // 购物车，与vuex的state同一引用
      currMenu: 0, // 当前被激活的菜单
      rightPanelHeights: [0], // 用于菜单与商品的滚动联动
      menus: []
    };
  },
  props: {
    restaurantId: {},
    piecewiseAgentFee: {}// 配送费相关
  },
  methods: {
    /**
     * 格式化图片url
     */
    formatImgUrl (url) {
      return getImgUrl(url);
    },
    /**
     * 菜单切换
     */
    toggleMenu (index) {
      if (index === this.currMenu) {
        return false;
      }
      // 切换菜单，设置指定菜单商品列表所在位置
      this.scrollWidthAnimation(this.rightPanelHeights[index]);
      // this.currMenu = index;
    },
    rightPanelScroll (event) {
      // 右栏滚动事件处理
      // 高度数组
      const rightPanelHeights = this.rightPanelHeights;
      // 将当前scrollTop与数组某相邻两个元素比较
      for (let index = 0; index < rightPanelHeights.length - 1; index++) {
        const h1 = rightPanelHeights[index];
        const h2 = rightPanelHeights[index + 1];
        // 若scrollTop位于数组某相邻两个元素，激活对应菜单按钮样式
        if (h1 <= event.target.scrollTop && event.target.scrollTop < h2) {
          this.currMenu = index;
        }
      }
    },
    computeHeights () {
      // 计算高度数组
      let height = 0;
      const dlElements = this.$refs.rightPanel.getElementsByTagName('dl');
      for (let index = 0; index < dlElements.length; index++) {
        const element = dlElements[index];
        height += element.clientHeight;
        this.rightPanelHeights.push(height);
      }
    },
    scrollWidthAnimation (position) { // 滚动动画
      const rightPanel = this.$refs.rightPanel; // 滚动列表容器
      const currHeight = rightPanel.scrollTop; // 当前滚动条高度
      const distance = currHeight - position; // 当前滚动条高度与所要滚动到的位置的差距
      const intervalDist = Math.floor(distance / SCROLL_INTERVAL);// 每次滚动的距离
      const surplusDist = distance % SCROLL_INTERVAL;// 余数
      let count = 0;

      scroll();
      function scroll () {
        setTimeout(() => {
          if (count++ === SCROLL_INTERVAL - 1) {
            rightPanel.scrollTop -= (surplusDist + intervalDist);
            return;
          }
          rightPanel.scrollTop -= intervalDist;// 逐步滚动
          scroll();
        }, 0);
      }
    },
    foodAdd (id) { // 添加商品
      // 添加飞球动画
      this.appendFlyBall();
      // 购物车图标动画
      this.setShopCartAnimation();
      this.changeCount(id, true);
    },
    foodDel (id) { // 减少商品
      this.changeCount(id, false);
    },
    changeCount (id, isAdd) {
      let food = this.getFood(id);
      if (!food) {
        return;
      }
      // 获取对应的栏目
      let menus = this.menus;
      let shouldChangeMenu = menus.find(menu => menu.id === food.category_id);
      // 检查是否有相应的属性
      food.count === undefined && this.$set(food, 'count', 0);
      shouldChangeMenu.count === undefined && this.$set(shouldChangeMenu, 'count', 0);

      // 从购物车获取该商品下标
      let foodInCart = this.cart.find(item => item.id === food.item_id);
      if (isAdd) {
        food.count++;
        shouldChangeMenu.count++;

        // 更改购物车记录
        if (!foodInCart) {
          this.$store.commit('ADD_FOOD', {
            shopId: this.restaurantId,
            food: {
              id: food.item_id,
              name: food.name,
              count: food.count,
              price: food.specfoods[0].price
            }
          });
        }
      } else {
        food.count--;
        shouldChangeMenu.count--;
      }
      this.$store.dispatch('changeFoodCount', {
        shopId: this.restaurantId,
        foodId: food.item_id,
        foodCount: food.count
      });
    },
    /**
     * 适配“热销”、“优惠”等菜单的商品数据，方便数据同步
     */
    adapteTopMenu () {
      let menus = this.menus;
      for (let i = 0; i < menus.length; i++) {
        let menu = menus[i];
        let foods = menu.foods;

        for (let j = 0; j < foods.length && menu.id < 0; j++) {
          let food = foods[j];
          foods[j] = this.getFood(food.item_id);
        }
      }
    },
    /**
     * 进入页面时检查购物车并自动添加商品
     */
    setCart () {
      let cart = this.cart;
      if (!cart.length) {
        return;
      }

      let menus = this.menus;
      for (let i = 0; i < menus.length; i++) {
        let menu = menus[i];
        let foods = menu.foods;
        for (let j = 0; j < foods.length; j++) {
          let food = foods[j];
          const foodId = food.item_id;
          for (let k = 0; k < cart.length; k++) {
            const foodInCart = cart[k];
            if (foodInCart.id === foodId) {
              menu.count === undefined && this.$set(menu, 'count', 0);
              food.count === undefined && this.$set(food, 'count', 0);

              if (menu.id !== -1) {
                menu.count += foodInCart.count;
              }
              food.count = foodInCart.count;
            }
          }
        }
      }
    },
    /**
     * 根据id获取某一商品
     */
    getFood (id) {
      const menus = this.menus;
      for (let i = 0; i < menus.length; i++) {
        let menu = menus[i];

        if (menu.id < 0) {
          continue;
        }

        let foods = menu.foods;
        for (let j = 0; j < foods.length; j++) {
          let food = foods[j];
          const foodId = food.item_id;
          if (foodId === id) {
            return food;
          }
        }
      }
      return null;
    },
    /**
     * ajax
     */
    getMenuData () {
      getMenu(this.restaurantId).then((response) => {
        return response.data;
      }).then((data) => {
        this.menus = data;
        // 适配“热销”、“优惠”等菜单的商品数据，方便数据同步
        this.adapteTopMenu();
        // 备份数据，删除购物车的时候用
        this.menusBak = this.menus.concat();
        this.setCart();
        this.$nextTick(() => {
          // 渲染完了之后，计算高度，用于菜单与商品滑动时的联动
          this.computeHeights();
        });
      });
    },
    /**
     * 清空购物车
     */
    clearCart () {
      this.$store.commit('CLEAR_A_SHOP', { shopId: this.restaurantId });

      let menus = this.menus;
      for (let i = 0; i < menus.length; i++) {
        let menu = menus[i];
        typeof menu.count === 'number' && (menu.count = 0);
        let foods = menu.foods;

        for (let j = 0; j < foods.length && menu.id < 0; j++) {
          let food = foods[j];
          typeof food.count === 'number' && (food.count = 0);
          foods[j] = this.getFood(food.item_id);
        }
      }
    },
    /**
     * 设置飞球动画的封装
     */
    getStyle (type) {
      if (!this.addButton) {
        return;
      }
      // 需要获取用户点击的dom，取得相关位置
      const addButton = this.addButton.getBoundingClientRect();
      // 购物车的高度
      const cartHeight = document.querySelector('.bottomNav-cartfooter_1qvQh_0').clientHeight;
      // 视口高度
      const winHeight = window.innerHeight;
      let style = '';
      if (type === 'flyball') {
        style = 'top: ' + addButton.top + 'px; left: ' + addButton.left + 'px; transform: translate3d(-' + (addButton.left - 80) + 'px, 0px, 0px);';
      } else if (type === 'inner') {
        style = 'width: 36px; height: 36px; transform: translate3d(0px, ' + (winHeight - addButton.top - cartHeight) + 'px, 0px);';
      }
      return style;
    },
    // 添加购物车的飞球
    appendFlyBall () {
      let flyball = document.createElement('div');
      let inner = document.createElement('div');
      flyball.appendChild(inner);
      flyball.className = 'flyball';
      inner.className = 'inner';
      // 添加飞球
      document.body.appendChild(flyball);
      // 设置style以运行动画
      flyball.style = this.getStyle('flyball');
      inner.style = this.getStyle('inner');
      // 1秒钟后删除飞球
      setTimeout(() => {
        document.body.removeChild(flyball);
      }, 1000);
    },
    /**
     * 设置购物车缩放的动画
     */
    setShopCartAnimation () {
      if (this.timeId) {
        clearTimeout(this.timeId);
      }
      let shopcart = this.$refs.shopcart.$refs.cartLogo;
      if (!shopcart.classList.contains('addingfood')) {
        shopcart.classList.add('addingfood');
      }
      this.timeId = setTimeout(() => {
        if (shopcart.classList.contains('addingfood')) {
          shopcart.classList.remove('addingfood');
        }
      }, 1000);
    }
  },
  created () {
    // 初始化购物车
    this.$store.commit('INIT_A_SHOP', { shopId: this.restaurantId });
    this.cart = this.$store.getters.shopCart({ shopId: this.restaurantId });
    // 获取商店菜单已经菜品
    this.getMenuData();
  },
  components: {
    ShopCart,
    CartControl
  },
  computed: {
    ...mapGetters([
      'addButton'
    ])
  }
};
</script>
<style>
s .menucategory-categoryItem_3e27M.menucategory-active_JnDmc {
  color: #333;
  background-color: #fff;
}
.menuview-menuview_2hUkG {
  height: 100%;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}
.menuview-menuviewNodata_2iJo3 {
  padding: 0.666667rem 0;
  padding: 6.666667vw 0;
  text-align: center;
  font-size: 0.426667rem;
  color: #333;
  background-color: #eee;
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
.menuview-menuviewNodata_2iJo3 img {
  width: 40%;
}
.menuview-menuview_2hUkG img {
  max-width: 100%;
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
.menuview-menuviewNodata_2iJo3 p {
  padding: 0;
  margin: 0;
  line-height: 0.853333rem;
  line-height: 8.533333vw;
}
.menuview-menuview_2hUkG h3,
.menuview-menuview_2hUkG p,
.menuview-menuview_2hUkG ul {
  margin: 0;
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
.menuview-menuviewNodata_2iJo3 p {
  padding: 0;
  margin: 0;
  line-height: 0.853333rem;
  line-height: 8.533333vw;
}
.menuview-menuview_2hUkG h3,
.menuview-menuview_2hUkG p,
.menuview-menuview_2hUkG ul {
  margin: 0;
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
.menuview-menuviewMain_17K3g {
  height: 100%;
  padding-bottom: 1.28rem;
  padding-bottom: 12.8vw;
  background-color: #fff;
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
.menuview-main_i6fQ3 {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  height: 100%;
}
.menuview-menuview_2hUkG ul {
  padding: 0 0 1.066667rem;
  padding: 0 0 10.666667vw;
  list-style: none;
  -webkit-box-flex: 0;
  -webkit-flex: none;
  -ms-flex: none;
  flex: none;
}
.menuview-menuview_2hUkG h3,
.menuview-menuview_2hUkG p,
.menuview-menuview_2hUkG ul {
  margin: 0;
}
.menucategory-category_29kyE {
  overflow-y: auto;
  height: 100%;
  background-color: #f8f8f8;
  -webkit-overflow-scrolling: touch;
  padding-bottom: 1.066667rem;
  padding-bottom: 10.666667vw;
}
.menuview-menuNav_2_lFf {
  width: 2.053333rem;
  width: 20.533333vw;
  height: 100%;
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
.menucategory-categoryItem_3e27M.menucategory-active_JnDmc {
  color: #333;
  background-color: #fff;
}
.menucategory-categoryItem_3e27M {
  position: relative;
  padding: 0.466667rem 0.2rem;
  padding: 4.666667vw 2vw;
  border-bottom: 1px solid #e8e8e8;
  font-size: 0.32rem;
  color: #666;
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
.menuview-menuview_2hUkG img {
  max-width: 100%;
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
.container[data-v-f433384a] {
  position: relative;
  height: 100%;
}

.menuview-menuList_JqDMu {
  height: 100%;
  width: 7.946667rem;
  width: 79.466667vw;
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
.container .scroller[data-v-f433384a] {
  height: 100%;
  padding-bottom: 1.066667rem;
  padding-bottom: 10.666667vw;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
dl[data-v-f433384a] {
  margin: 0;
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
dt[data-v-f433384a] {
  position: relative;
  margin-left: 0.266667rem;
  margin-left: 2.666667vw;
  padding: 0.2rem 0.8rem 0.2rem 0;
  padding: 2vw 8vw 2vw 0;
  border-bottom: 1px solid #eee;
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
.category-title[data-v-f433384a] {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
  overflow: hidden;
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
.category-name[data-v-f433384a] {
  margin-right: 0.133333rem;
  margin-right: 1.333333vw;
  font-weight: 700;
  font-size: 0.32rem;
  color: #666;
  -webkit-box-flex: 0;
  -webkit-flex: none;
  -ms-flex: none;
  flex: none;
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
.category-title span[data-v-f433384a] {
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  color: #999;
  font-size: 0.266667rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
dd[data-v-f433384a] {
  position: relative;
  margin: 0;
  min-height: 3.066667rem;
  min-height: 30.666667vw;
  padding-left: 0.266667rem;
  padding-left: 2.666667vw;
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
.fooddetails-root_2HoY2 {
  padding: 0.266667rem 0.266667rem 0.266667rem 0;
  padding: 2.666667vw 2.666667vw 2.666667vw 0;
  margin-bottom: 1px;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  min-height: 2.746667rem;
  min-height: 27.466667vw;
  position: relative;
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
.fooddetails-logo_2Q0S7 {
  width: 2.026667rem;
  width: 20.266667vw;
  height: 2.026667rem;
  height: 20.266667vw;
  vertical-align: top;
  -webkit-box-flex: 0;
  -webkit-flex: none;
  -ms-flex: none;
  flex: none;
  margin-right: 0.266667rem;
  margin-right: 2.666667vw;
  position: relative;
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
.fooddetails-logo_2Q0S7 .fooddetails-attrTag_2TNes {
  position: absolute;
  left: 0;
  top: 0;
  border-top-left-radius: 0.053333rem;
  border-top-left-radius: 0.533333vw;
  border-bottom-right-radius: 0.053333rem;
  border-bottom-right-radius: 0.533333vw;
}
.mini-tag-tag_1I2lF_0 {
  position: relative;
  font-size: 0.266667rem;
  color: transparent;
  white-space: nowrap;
}
.attrTag-attrTag_2f7Ms_0 {
  width: 0.64rem;
  width: 6.4vw;
  height: 0.346667rem;
  height: 3.466667vw;
}
.mini-tag-ghost_2_w2f_0 {
  position: absolute;
  left: 0;
  top: 0;
  right: -100%;
  bottom: -100%;
  -webkit-transform: scale(0.5);
  transform: scale(0.5);
  -webkit-transform-origin: 0 0;
  transform-origin: 0 0;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
  -ms-flex-pack: center;
  justify-content: center;
  font-size: 0.533333rem;
}
.attrTag-newGhost_3oqLj_0 {
  color: #fff;
  background-image: -webkit-linear-gradient(315deg, #7ae336, #00c180);
  background-image: linear-gradient(135deg, #7ae336, #00c180);
}
.fooddetails-logo_2Q0S7 img {
  width: 100%;
  border-radius: 0.053333rem;
  border-radius: 0.533333vw;
}
.menuview-menuview_2hUkG img {
  max-width: 100%;
}
.fooddetails-info_1fBtn {
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  -ms-flex: 1;
  flex: 1;
  position: relative;
  padding-bottom: 0.666667rem;
  padding-bottom: 6.666667vw;
}
.menuview-menuview_2hUkG h3,
.menuview-menuview_2hUkG p,
.menuview-menuview_2hUkG ul {
  margin: 0;
}
.fooddetails-name_P4hpW {
  font-size: 0.4rem;
  text-align: left;
  font-weight: 700;
  line-height: 1.2;
  overflow: hidden;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: start;
  -webkit-align-items: start;
  -ms-flex-align: start;
  align-items: start;
  padding-right: 0.533333rem;
  padding-right: 5.333333vw;
  word-break: break-word;
}
.menuview-menuview_2hUkG h3,
.menuview-menuview_2hUkG p,
.menuview-menuview_2hUkG ul {
  margin: 0;
}
.fooddetails-desc_3tvBJ {
  margin: 0.133333rem 0 !important;
  margin: 1.333333vw 0 !important;
  font-size: 0.253333rem;
  color: #999;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  width: 4.8rem;
  width: 48vw;
}
.fooddetails-sales_1ETVq {
  margin: 0.173333rem 0 !important;
  margin: 1.733333vw 0 !important;
  color: #666;
  font-size: 0.293333rem;
  line-height: 1;
  text-align: left;
}
.fooddetails-sales_1ETVq span {
  vertical-align: middle;
}
.fooddetails-sales_1ETVq > span:not(:first-child) {
  margin-left: 0.106667rem;
  margin-left: 1.066667vw;
  vertical-align: middle;
}
.fooddetails-activityRow_1FKti {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
.vipActivity-root_f_hSQ_0 {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
}
.vipActivity-left_12HO6_0 {
  background-color: #302d22;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
  padding: 0 0.08rem;
  padding: 0 0.8vw;
  border-top-left-radius: 0.026667rem;
  border-top-left-radius: 0.266667vw;
  border-bottom-left-radius: 0.026667rem;
  border-bottom-left-radius: 0.266667vw;
  height: 0.346667rem;
  height: 3.466667vw;
}
.vipActivity-icon_1_u7D_0 {
  height: 0.133333rem;
  height: 1.333333vw;
  width: 0.186667rem;
  width: 1.866667vw;
  margin-right: 0.093333rem;
  margin-right: 0.933333vw;
}
.mini-tag-tag_1I2lF_0 {
  position: relative;
  font-size: 0.266667rem;
  color: transparent;
  white-space: nowrap;
}
.mini-tag-ghost_2_w2f_0 {
  position: absolute;
  left: 0;
  top: 0;
  right: -100%;
  bottom: -100%;
  -webkit-transform: scale(0.5);
  transform: scale(0.5);
  -webkit-transform-origin: 0 0;
  transform-origin: 0 0;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
  -ms-flex-pack: center;
  justify-content: center;
  font-size: 0.533333rem;
}
.vipActivity-right_13c6L_0 {
  padding: 0 0.053333rem;
  padding: 0 0.533333vw;
  height: 0.346667rem;
  height: 3.466667vw;
}
.mini-tag-tag_1I2lF_0 {
  position: relative;
  font-size: 0.266667rem;
  color: transparent;
  white-space: nowrap;
}
.vipActivity-rightGhost_3ZWjy_0 {
  background-color: #fff2bd;
  color: #1c1a13;
  border: 2px solid #aca275;
  border-left: none;
  border-top-right-radius: 0.053333rem;
  border-top-right-radius: 0.533333vw;
  border-bottom-right-radius: 0.053333rem;
  border-bottom-right-radius: 0.533333vw;
}
.mini-tag-ghost_2_w2f_0 {
  position: absolute;
  left: 0;
  top: 0;
  right: -100%;
  bottom: -100%;
  -webkit-transform: scale(0.5);
  transform: scale(0.5);
  -webkit-transform-origin: 0 0;
  transform-origin: 0 0;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
  -ms-flex-pack: center;
  justify-content: center;
  font-size: 0.533333rem;
}
.salesInfo-price_3_oc1_0 {
  font-weight: 700;
  font-size: 0.426667rem;
  line-height: 0.426667rem;
  line-height: 4.266667vw;
  color: #f60;
  padding-bottom: 0.093333rem;
  padding-bottom: 0.933333vw;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: baseline;
  -webkit-align-items: baseline;
  -ms-flex-align: baseline;
  align-items: baseline;
}
.fooddetails-salesInfo_MPG41 {
  position: absolute;
  bottom: 0;
}
.salesInfo-price_3_oc1_0:before {
  font-weight: 400;
  content: "\A5";
  font-size: 0.32rem;
  margin-right: 0.053333rem;
  margin-right: 0.533333vw;
  display: inline-block;
}
.salesInfo-price_3_oc1_0 span:first-child {
  margin-right: 0.106667rem;
  margin-right: 1.066667vw;
}
.salesInfo-lowestPrice_3yG6H_0 {
  font-weight: 500;
  font-size: 0.32rem;
  color: #ff5339;
}
.fooddetails-button_RwKqC {
  position: absolute;
  right: 0;
  bottom: -0.066667rem;
  bottom: -0.666667vw;
}
.menuview-menuview_2hUkG *,
:after,
:before {
  -webkit-box-sizing: inherit;
  box-sizing: inherit;
}
.cartbutton-entitybutton_2u6UF {
  display: inline-block;
  font-size: 0.346667rem;
  white-space: nowrap;
}
.cartbutton-entitybutton_2u6UF a {
  display: inline-block;
  padding: 0.093333rem;
  padding: 0.933333vw;
  vertical-align: middle;
  text-decoration: none;
}
.cartbutton-entityspecbutton_FErr2 {
  display: inline-block;
  vertical-align: middle;
  color: #fff;
  background-color: #3199e8;
  text-decoration: none;
  padding: 0 0.2rem;
  padding: 0 2vw;
  font-size: 0.32rem;
  border-radius: 0.346667rem;
  border-radius: 3.466667vw;
  line-height: 0.666667rem;
  line-height: 6.666667vw;
}
.fooddetails-activityRow_1FKti {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
}
.foodcommon-activity_2wCAV {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
}

.foodcommon-activity_2wCAV > span {
  height: 0.346667rem;
  height: 3.466667vw;
  padding: 0 0.08rem;
  padding: 0 0.8vw;
}
.mini-tag-tag_1I2lF_0 {
  position: relative;
  font-size: 0.266667rem;
  color: transparent;
  white-space: nowrap;
}
.foodcommon-activity_2wCAV .foodcommon-rateGhost_1xmLU {
  background-image: -webkit-gradient(
    linear,
    left top,
    right top,
    from(#ff7416),
    color-stop(98%, #ff3c15)
  );
  background-image: -webkit-linear-gradient(left, #ff7416, #ff3c15 98%);
  background-image: linear-gradient(90deg, #ff7416, #ff3c15 98%);
  border-top-left-radius: 0.013333rem;
  border-top-left-radius: 0.133333vw;
  border-top-right-radius: 0.013333rem;
  border-top-right-radius: 0.133333vw;
  color: #fff;
}
.mini-tag-ghost_2_w2f_0 {
  position: absolute;
  left: 0;
  top: 0;
  right: -100%;
  bottom: -100%;
  -webkit-transform: scale(0.5);
  transform: scale(0.5);
  -webkit-transform-origin: 0 0;
  transform-origin: 0 0;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
  -ms-flex-pack: center;
  justify-content: center;
  font-size: 0.533333rem;
}
.foodcommon-activity_2wCAV > span {
  height: 0.346667rem;
  height: 3.466667vw;
  padding: 0 0.08rem;
  padding: 0 0.8vw;
}
.mini-tag-tag_1I2lF_0 {
  position: relative;
  font-size: 0.266667rem;
  color: transparent;
  white-space: nowrap;
}
.foodcommon-activity_2wCAV .foodcommon-rateTextGhost_1a27R {
  color: #f07373;
  border: 2px solid #ff3c15;
  border-left: none;
}
.mini-tag-ghost_2_w2f_0 {
  position: absolute;
  left: 0;
  top: 0;
  right: -100%;
  bottom: -100%;
  -webkit-transform: scale(0.5);
  transform: scale(0.5);
  -webkit-transform-origin: 0 0;
  transform-origin: 0 0;
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -ms-flex-align: center;
  align-items: center;
  -webkit-box-pack: center;
  -webkit-justify-content: center;
  -ms-flex-pack: center;
  justify-content: center;
  font-size: 0.533333rem;
}
.fooddetails-button_RwKqC {
  position: absolute;
  right: 0;
  bottom: -0.066667rem;
  bottom: -0.666667vw;
}
.cartbutton-entitybutton_2u6UF {
  display: inline-block;
  font-size: 0.346667rem;
  white-space: nowrap;
}
.cartbutton-entitybutton_2u6UF a {
  display: inline-block;
  padding: 0.093333rem;
  padding: 0.933333vw;
  vertical-align: middle;
  text-decoration: none;
}
[data-dpr="2"] .cartbutton-entitybutton_2u6UF svg {
  width: 40px;
  height: 40px;
}
.cartbutton-entitybutton_2u6UF svg {
  width: 20px;
  height: 20px;
  vertical-align: middle;
  fill: #2395ff;
}
.cartbutton-entityquantity_1LX01 {
  display: inline-block;
  text-align: center;
  color: #666;
  vertical-align: middle;
  font-size: 0.373333rem;
  min-width: 0.4rem;
  min-width: 4vw;
  max-width: 2em;
  overflow: hidden;
}
.cartbutton-entitybutton_2u6UF a {
  display: inline-block;
  padding: 0.093333rem;
  padding: 0.933333vw;
  vertical-align: middle;
  text-decoration: none;
}
.menucategory-categoryQuantity_28BIn {
  position: absolute;
  right: 0.08rem;
  right: 0.8vw;
  top: 0.08rem;
  top: 0.8vw;
  color: #fff;
  background-image: -webkit-gradient(
    linear,
    right top,
    left top,
    from(#ff7416),
    color-stop(98%, #ff3c15)
  );
  background-image: -webkit-linear-gradient(right, #ff7416, #ff3c15 98%);
  background-image: linear-gradient(-90deg, #ff7416, #ff3c15 98%);
  border-radius: 0.2rem;
  border-radius: 2vw;
  font-size: 0.266667rem;
  font-weight: 700;
  text-align: center;
  min-width: 0.373333rem;
  min-width: 3.733333vw;
  padding: 0 0.106667rem;
  padding: 0 1.066667vw;
  line-height: 0.373333rem;
  line-height: 3.733333vw;
}
.flyball {
  position: fixed;
  top: 0;
  left: 0;
  -webkit-transition: -webkit-transform 0.5s linear;
  transition: -webkit-transform 0.5s linear;
  transition: transform 0.5s linear;
  transition: transform 0.5s linear, -webkit-transform 0.5s linear;
}
.flyball .inner {
  position: absolute;
  top: 0;
  left: 0;
  background-color: #3190e8;
  border-radius: 50%;
}
.flyball,
.flyball .inner {
  will-change: transform;
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}
.flyball .inner {
  -webkit-transition: -webkit-transform 0.5s cubic-bezier(0.3, -0.2, 1, 0);
  transition: -webkit-transform 0.5s cubic-bezier(0.3, -0.2, 1, 0);
  transition: transform 0.5s cubic-bezier(0.3, -0.2, 1, 0);
  transition: transform 0.5s cubic-bezier(0.3, -0.2, 1, 0),
    -webkit-transform 0.5s cubic-bezier(0.3, -0.2, 1, 0);
}
</style>
